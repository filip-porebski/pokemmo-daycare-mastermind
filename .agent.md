# Agent Instructions for PokéMMO Daycare Mastermind

## Project Overview
This is a React TypeScript application for PokéMMO breeding optimization. It helps players plan and optimize Pokémon breeding strategies, including IV calculations, nature planning, and breeding trees.

## Key Technologies
- **React** with TypeScript
- **Redux Toolkit** for state management
- **Styled Components** for styling
- **Webpack** for bundling
- **Jest** for testing

## Common Issues and Solutions

### Build Issues

#### Import Ordering
- **Problem**: ESLint rule `import/first` requires all imports at the top of modules
- **Solution**: Always place all `import` statements before any other code, including variable declarations and try-catch blocks
- **Example**: In `PokemonBuilder.tsx`, imports were mixed with code - moved all imports to the top

#### PostCSS Loader Configuration
- **Problem**: Newer versions of `postcss-loader` (v8+) use different configuration format
- **Solution**: Wrap plugins configuration in `postcssOptions` object
- **Location**: `config/webpack.config.js`
- **Fix**: 
  ```javascript
  // Old format (causes error)
  options: {
    ident: 'postcss',
    plugins: () => [...]
  }
  
  // New format (correct)
  options: {
    postcssOptions: {
      ident: 'postcss',
      plugins: [...]
    }
  }
  ```

### Code Structure Guidelines

#### File Organization
- **Components**: Organized by feature in subdirectories (`pokemon/`, `projects/`, `form/`, etc.)
- **State Management**: Redux slices in feature directories, combined in `state/`
- **Types**: TypeScript interfaces in `PokemonTypes.ts`
- **Utilities**: Helper functions in `utils.ts` and feature-specific utils

#### Naming Conventions
- **Components**: PascalCase (e.g., `PokemonBuilder.tsx`)
- **Hooks**: camelCase starting with `use` (e.g., `pokemonHooks.ts`)
- **Types/Interfaces**: PascalCase with `I` prefix for interfaces (e.g., `IPokemon`)
- **Constants**: UPPER_SNAKE_CASE (e.g., `EMPTY_IV`)

#### Import Best Practices
1. All imports must be at the top of the file
2. Group imports: external libraries first, then internal modules
3. Use absolute imports with `@pokemmo/` alias
4. Dynamic requires should come after all static imports

### Development Workflow

#### Building
- **Command**: `npm run build`
- **Note**: Uses `--openssl-legacy-provider` flag for Node.js compatibility
- **Output**: `build/` directory ready for deployment

#### Testing
- **Command**: `npm test`
- **Framework**: Jest with React Testing Library
- **Location**: Test files alongside components with `.test.ts` extension

#### Development Server
- **Command**: `npm start`
- **Port**: Configured in webpack dev server config

### Known Deprecation Warnings
The following webpack deprecation warnings are expected and don't affect functionality:
- `DEP_WEBPACK_COMPILATION_OPTIMIZE_CHUNK_ASSETS`
- `DEP_WEBPACK_COMPILATION_CACHE`
- `DEP_WEBPACK_COMPILATION_ASSETS`

These are due to webpack version compatibility and can be ignored until webpack is upgraded.

### State Management Patterns

#### Redux Structure
- **Store**: Configured in `state/store.ts`
- **Slices**: Feature-based slices (e.g., `pokemonSlice.ts`, `projectsSlice.ts`)
- **Selectors**: Use Redux Toolkit's `createSelector` for memoized selectors
- **Async Actions**: Use `createAsyncThunk` for async operations

#### Component Patterns
- **Hooks**: Custom hooks for complex logic (e.g., `pokemonHooks.ts`)
- **Styled Components**: Use styled-components for styling with theme variables
- **Form Components**: Reusable form components in `form/` directory

### Performance Considerations
- **Code Splitting**: Webpack automatically splits chunks
- **Memoization**: Use React.memo and useMemo for expensive calculations
- **Bundle Analysis**: Check bundle sizes after build (shown in build output)

### Deployment Notes
- **Static Hosting**: Built for static hosting (GitHub Pages, Netlify, etc.)
- **Homepage**: Configure `homepage` field in `package.json` for subdirectory deployment
- **Assets**: All assets are fingerprinted for caching

### Troubleshooting

#### Build Failures
1. Check import ordering (all imports at top)
2. Verify TypeScript types are correct
3. Check for unused imports (may cause warnings)
4. Ensure all dependencies are installed

#### Runtime Issues
1. Check Redux DevTools for state issues
2. Verify API calls and data flow
3. Check browser console for errors
4. Test with different Pokémon data scenarios

### Future Improvements
- Upgrade webpack to remove deprecation warnings
- Consider migrating to Vite for faster builds
- Add more comprehensive testing coverage
- Implement proper error boundaries
- Add accessibility improvements

## Quick Commands
```bash
# Install dependencies
npm install

# Start development server
npm start

# Run tests
npm test

# Build for production
npm run build

# Serve built files locally
npx serve -s build
```